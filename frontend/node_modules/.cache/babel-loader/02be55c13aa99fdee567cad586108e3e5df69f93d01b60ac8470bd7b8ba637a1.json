{"ast":null,"code":"var _jsxFileName = \"/Users/osman/Documents/projects/c458p1/frontend/src/SurveyPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getSurveys, addDoc, collection, db, deleteSurvey // Added deleteSurvey import\n} from './firebaseConfig';\nimport SurveyBuilder from './SurveyBuilder';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst styles = {\n  // ... keep existing styles ...\n  container: {\n    maxWidth: '1000px',\n    margin: '2rem auto',\n    padding: '0 1rem',\n    fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n    position: 'relative' // Added for dashboard button positioning\n  },\n  dashboardButton: {\n    position: 'absolute',\n    top: '1rem',\n    left: '1rem',\n    padding: '0.6rem 1.2rem',\n    border: 'none',\n    borderRadius: '4px',\n    cursor: 'pointer',\n    transition: 'all 0.3s ease',\n    backgroundColor: '#2c3e50',\n    color: 'white',\n    '&:hover': {\n      backgroundColor: '#34495e'\n    }\n  },\n  deleteButton: {\n    position: 'absolute',\n    top: '0.5rem',\n    right: '0.5rem',\n    backgroundColor: 'transparent',\n    border: 'none',\n    color: '#e74c3c',\n    cursor: 'pointer',\n    fontSize: '1.2rem',\n    padding: '0.2rem',\n    '&:hover': {\n      color: '#c0392b'\n    }\n  },\n  surveyCard: {\n    backgroundColor: 'white',\n    borderRadius: '8px',\n    padding: '1.5rem',\n    boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    cursor: 'pointer',\n    transition: 'transform 0.2s ease',\n    position: 'relative',\n    // Added for delete button positioning\n    '&:hover': {\n      transform: 'translateY(-2px)'\n    }\n  }\n};\nconst SurveyPage = ({\n  user\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [surveys, setSurveys] = useState([]);\n  const [selectedSurvey, setSelectedSurvey] = useState(null);\n  const [responses, setResponses] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [submissionError, setSubmissionError] = useState(null);\n\n  // Add delete survey handler\n  const handleDeleteSurvey = async (surveyId, e) => {\n    e.stopPropagation();\n    try {\n      if (window.confirm('Are you sure you want to delete this survey?')) {\n        const result = await deleteSurvey(surveyId);\n        if (result.success) {\n          setSurveys(surveys.filter(s => s.id !== surveyId));\n          if ((selectedSurvey === null || selectedSurvey === void 0 ? void 0 : selectedSurvey.id) === surveyId) {\n            setSelectedSurvey(null);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error deleting survey:', error);\n      setError('Failed to delete survey');\n    }\n  };\n\n  // Keep existing useEffect and other functions unchanged\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      style: styles.dashboardButton,\n      onClick: () => navigate('/dashboard'),\n      children: \"\\u2190 Return to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: styles.header,\n      children: \"Survey Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.userInfo,\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Welcome, \", user.displayName || user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginBottom: '1rem'\n        },\n        children: \"Available Surveys\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.surveyGrid,\n        children: surveys.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: \"No surveys available. Create a new survey below!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this) : surveys.map(survey => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.surveyCard,\n            border: (selectedSurvey === null || selectedSurvey === void 0 ? void 0 : selectedSurvey.id) === survey.id ? '2px solid #3498db' : 'none'\n          },\n          onClick: () => handleSelectSurvey(survey),\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.deleteButton,\n            onClick: e => handleDeleteSurvey(survey.id, e),\n            title: \"Delete survey\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: survey.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#95a5a6'\n            },\n            children: [survey.questions.length, \" questions\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 17\n          }, this)]\n        }, survey.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n_s(SurveyPage, \"nuy0RzPODW78PorR1XUdykdORog=\", false, function () {\n  return [useNavigate];\n});\n_c = SurveyPage;\nexport default SurveyPage;\nvar _c;\n$RefreshReg$(_c, \"SurveyPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","getSurveys","addDoc","collection","db","deleteSurvey","SurveyBuilder","jsxDEV","_jsxDEV","styles","container","maxWidth","margin","padding","fontFamily","position","dashboardButton","top","left","border","borderRadius","cursor","transition","backgroundColor","color","deleteButton","right","fontSize","surveyCard","boxShadow","transform","SurveyPage","user","_s","navigate","surveys","setSurveys","selectedSurvey","setSelectedSurvey","responses","setResponses","loading","setLoading","error","setError","submissionError","setSubmissionError","handleDeleteSurvey","surveyId","e","stopPropagation","window","confirm","result","success","filter","s","id","console","style","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","header","userInfo","displayName","email","marginBottom","surveyGrid","length","textAlign","map","survey","handleSelectSurvey","title","questions","_c","$RefreshReg$"],"sources":["/Users/osman/Documents/projects/c458p1/frontend/src/SurveyPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  getSurveys,\n  addDoc,\n  collection,\n  db,\n  deleteSurvey  // Added deleteSurvey import\n} from './firebaseConfig';\nimport SurveyBuilder from './SurveyBuilder';\n\nconst styles = {\n  // ... keep existing styles ...\n  container: {\n    maxWidth: '1000px',\n    margin: '2rem auto',\n    padding: '0 1rem',\n    fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n    position: 'relative',  // Added for dashboard button positioning\n  },\n  dashboardButton: {\n    position: 'absolute',\n    top: '1rem',\n    left: '1rem',\n    padding: '0.6rem 1.2rem',\n    border: 'none',\n    borderRadius: '4px',\n    cursor: 'pointer',\n    transition: 'all 0.3s ease',\n    backgroundColor: '#2c3e50',\n    color: 'white',\n    '&:hover': {\n      backgroundColor: '#34495e',\n    },\n  },\n  deleteButton: {\n    position: 'absolute',\n    top: '0.5rem',\n    right: '0.5rem',\n    backgroundColor: 'transparent',\n    border: 'none',\n    color: '#e74c3c',\n    cursor: 'pointer',\n    fontSize: '1.2rem',\n    padding: '0.2rem',\n    '&:hover': {\n      color: '#c0392b',\n    },\n  },\n  surveyCard: {\n    backgroundColor: 'white',\n    borderRadius: '8px',\n    padding: '1.5rem',\n    boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    cursor: 'pointer',\n    transition: 'transform 0.2s ease',\n    position: 'relative',  // Added for delete button positioning\n    '&:hover': {\n      transform: 'translateY(-2px)',\n    },\n  },\n};\n\nconst SurveyPage = ({ user }) => {\n  const navigate = useNavigate();\n  const [surveys, setSurveys] = useState([]);\n  const [selectedSurvey, setSelectedSurvey] = useState(null);\n  const [responses, setResponses] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [submissionError, setSubmissionError] = useState(null);\n\n  // Add delete survey handler\n  const handleDeleteSurvey = async (surveyId, e) => {\n    e.stopPropagation();\n    try {\n      if (window.confirm('Are you sure you want to delete this survey?')) {\n        const result = await deleteSurvey(surveyId);\n        if (result.success) {\n          setSurveys(surveys.filter(s => s.id !== surveyId));\n          if (selectedSurvey?.id === surveyId) {\n            setSelectedSurvey(null);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error deleting survey:', error);\n      setError('Failed to delete survey');\n    }\n  };\n\n  // Keep existing useEffect and other functions unchanged\n\n  return (\n    <div style={styles.container}>\n      {/* Add Dashboard Return Button */}\n      <button\n        style={styles.dashboardButton}\n        onClick={() => navigate('/dashboard')}\n      >\n        ← Return to Dashboard\n      </button>\n\n      <h1 style={styles.header}>Survey Management</h1>\n\n      {/* User Information */}\n      <div style={styles.userInfo}>\n        <h2>Welcome, {user.displayName || user.email}</h2>\n      </div>\n\n      {/* Survey Selection */}\n      <div>\n        <h2 style={{ marginBottom: '1rem' }}>Available Surveys</h2>\n        <div style={styles.surveyGrid}>\n          {surveys.length === 0 ? (\n            <p style={{ textAlign: 'center' }}>No surveys available. Create a new survey below!</p>\n          ) : (\n            surveys.map((survey) => (\n              <div\n                key={survey.id}\n                style={{\n                  ...styles.surveyCard,\n                  border: selectedSurvey?.id === survey.id ? '2px solid #3498db' : 'none'\n                }}\n                onClick={() => handleSelectSurvey(survey)}\n              >\n                {/* Delete Button */}\n                <button\n                  style={styles.deleteButton}\n                  onClick={(e) => handleDeleteSurvey(survey.id, e)}\n                  title=\"Delete survey\"\n                >\n                  ×\n                </button>\n\n                <h3>{survey.title}</h3>\n                <p style={{ color: '#95a5a6' }}>\n                  {survey.questions.length} questions\n                </p>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      {/* Keep the rest of the component unchanged */}\n      {/* ... */}\n    </div>\n  );\n};\n\nexport default SurveyPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}